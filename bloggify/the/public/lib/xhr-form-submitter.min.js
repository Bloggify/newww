/**
 * XHRFormSubmitter JavaScript Library
 * ===================================
 * A lightweigt JavaScript library that do one thing: submiting via XHR
 * requests. This doesn't depend on jQuery!
 *
 * For more information, see README file.
 * Report bugs in the GitHub repository.
 *
 * Developed with love by Ionică Bizău.
 * Licensed under the MIT license:
 *
 * --------------------
 *
 * The MIT License (MIT)
 *
 * Copyright (c) 2014 Ionică Bizău
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
(function(e){var t=["select","textarea","input","button"],a=function(e){var a=this;a._form=e.form,a.getFormData=function(e){for(var t=a._form.querySelectorAll("[name]"),n={},r=0;t.length>r;++r){var c=t[r],o=c.getAttribute("type"),s=c.getAttribute("name"),u=null;switch(o){case"checkbox":u=c.checked;break;case"image":u=c.getAttribute("src");break;case"radio":u=document.querySelector("input[name='"+s+"']:checked").value;break;case"button":case"text":case"url":case"date":case"color":case"datetime":case"datetime-local":case"email":case"file":case"hidden":case"month":case"number":case"password":case"range":case"search":case"submit":case"tel":case"time":case"week":default:u=c.value}n[s]=u}if(!e)return n;e="";for(var i in n)e+=encodeURIComponent(i)+"="+encodeURIComponent(n[i])+"&";return e=e.substr(0,e.length-1)},a.disableInputs=function(){for(var e=a._form.querySelectorAll(t.join(",")),n=0;e.length>n;++n)e[n].setAttribute("disabled","");return a},a.enableInputs=function(){for(var e=a._form.querySelectorAll(t.join(",")),n=0;e.length>n;++n)e[n].removeAttribute("disabled");return a},a.submit=function(t,n){"function"==typeof t&&(n=t,t=void 0),t=Object(t),n=n||function(){};var r=new XMLHttpRequest,c=a._form,o=t.actionUrl||c.getAttribute("action"),s=t.method||c.getAttribute("method"),u=a.getFormData(!0);return r.open(s,o),r.setRequestHeader("content-type","text/plain; charset=utf-8"),r.onreadystatechange=function(){if(4===r.readyState){e.disableOnSubmit===!0&&a.enableInputs();var t=r.responseText;try{t=JSON.parse(t)}catch(c){}return r.status>=400?n(t,null):(n(null,t),void 0)}},e.disableOnSubmit===!0&&a.disableInputs(),r.send(u),a}};e.XHRFormSubmitter=a})(window);